package vcode

import (
	"github.com/stretchr/testify/assert"
	"go.uber.org/zap"
	"testing"
	"yuemiao/config"
)

func Test_VCode(t *testing.T) {
	cfg := config.VCodeConfig{
		AppCode:   "",
		AppKey:    "",
		AppSecret: "",
	}

	vcode := NewVCode(zap.L(), cfg)

	result, err := vcode.VCodeResult("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", VCodeJS)
	assert.NoError(t, err)
	assert.Equal(t, "9", result)
}
